import { Meta, Subtitle } from '@storybook/blocks';
import { getReviewBlock } from '../../../.storybook/utils/documentation/review-block';

{/* Update the lastReview value in YYYY-MM-DD format when this page is reviewed */}
export const lastReview = '2024-12-06';

<Meta title="Development/Build a new component" />

# Build a new component

A component is a reusable UI element that can be used in layouts directly, or within other components.

If you want to build a layout instead, see [Build a new layout](/docs/development-build-a-new-layout--docs)

## Setup

1. In `./public/app/frontend/src/components` copy the `.template` folder and replace _.template_ in the folder and filenames with your component's name.
2. Open `./public/app/frontend/index.js` and add an import for your component in the _Components_ section. This will allow webpack to build your `.js`, `.scss` and `.html.twig` files into the `dist` directory, ready to be used by WordPress.
3. In `[component-name].stories.js` update `import template from './template.html.twig';` replacing _template_ with your component's name, change the title in the `export default` block to _Components/[Component name]_ and remove the `tags: ['no-tests']` line to enable automated testing.
4. In `index.js` update the file imports replacing _template_ with your component's name. If the component will need to run JavaScript then add `export default function() { // Code goes here }`. You will need to adapt the import in step 2 to import and run the JavaScript, e.g.

```
import component from './components/component;
component();
```

5. If Storybook isn't already running, `cd` into `./public/app/frontend` and run `npm run storybook` to build Storybook. It should open automatically in your browser at `localhost:6006`. Your component will be visible under **Components** in the sidebar.

## Build a component

1. In `component-name.stories.js` define your templates and any args they might take. For example, a button component with a primary and secondary variant might look like this:

```
export const Primary = Template.bind({});
Primary.args = {
    buttonText: 'Search',
    style: 'primary',
}

export const Secondary = Template.bind({});
Secondary.args = {
    ...Primary.args,
    style: 'secondary'
}
```

2. Build the HTML template in `component-name.html.twig`, including your arguments using Twig syntax and class names in BEM (See [Templating with Twig](https://twig.symfony.com/doc/3.x/templates.html) and [BEM quick start](https://en.bem.info/methodology/quick-start) for more information).
3. Style the component in `component-name.scss`. Ensure you've included `@import '../../../style';` at the top of the file to use global mixins and variables.
4. Add any JavaScript to `index.js` in a default export. See Setup step 4 above for an example.

## Documentation

All of our components should be well documented. Ideally each component should have:

-   At least one example in Storybook for each variant. For example if a button has a primary and secondary variant both should be available in the Storybook sidebar.
-   Each component should appear in at least one example page to show how it will look in context.

**JavaScript**: functions should be accompanied by JSDoc comments.

**SASS**: mixins and functions should be documented with SassDoc.

**Twig**: PHPDoc syntax can be used for Twig files and each component should have an example of how the component can be included, e.g.

```
example:
    {% include '@components/template/template.html.twig' with {
        templateVariable: 'Example variable'
    }%}
```

This makes it easier for backend developers as they can  copy and paste the example into a WordPress template then
update the variables.

## Testing

Full functional testing will take place once the component is integrated into the backend but we can carry out visual,
browser and accessibility testing within the Storybook application.

See the [Quality assurance](/docs/quality-assurance-general--docs) section for more information on testing.

### Browser testing

In Storybook open your component and click on the **Viewport** button in the toolbar at top. Use this to view the
component at different screensizes.

See [Compatibility](/docs/quality-assurance-compatibility--docs) for more detailed browser testing information.

### Accessibility testing

In Storybook open your component and press `âŒ¥ + A` to open the addons panel. Click on the Accessibility tab to view any
violations.

See [Accessibility](/docs/quality-assurance-accessibility--docs) for more detailed accessibility testing information.

## Lint

Once you're happy with your component the final step is to run the linting commands in your terminal.

`npm run lint` will run the linter and show you any issues

`npm run lint-fix` will automatically fix any issues that it can and list any that it couldn't

## Next steps

Once you've built and tested your component in the frontend you can connect it to the backend. See
[Connect a component to WordPress](/docs/development-connect-a-component-to-wordpress--docs) for more information.

> {getReviewBlock(lastReview)}
{#
@file
A content block that can be used in the sidebar to list links, files or link to a prefiltered search page

Available variables:
    - variant: 'list'|'archive'|'search' The button type
    - title: 'string An h2 that appears at the top of the component
    - links: array An array of links or file download links to be displayed in the nav component
        - url: string The url for the link/file
        - label: string The label for the link or filename
        - newTab: boolean Will this link open in a new tab?
        - format: 'PDF'|'ZIP'|'DOC' The file format
        - filesize: string The size of the file
        - language: string The language of the file if different to the language of the page
    - search: object Parameters to be passed to the search bar component, if it's to be displayed
        - id: string A unique id
        - action: string The form action,
        - input: object Parameters to be passed to the text input component
            - id: string A unique id
            - labelHidden: boolean Should the label be displayed,
            - label: string The label text,
        },
        button: object Parameters to be passed to the button component {
            text: string The button text,
        },
example:
    {% include '@components/sidebar-block/sidebar-block.html.twig' with {
    variant: 'list',
    title: 'Related pages',
    links: [
        {
            url: '#',
            format: 'PDF',
            filesize: '167 KB',
            label: 'CPR email address list',
        },
        {
            url: '#',
            format: 'PDF',
            filesize: '100 KB',
            label: 'CPR email address list',
            language: 'Welsh',
        },
        ],
    }%}
#}

{% set titleId = "sidebar-block-title-" ~ title|replace({' ': '-'})|lower ~ (isMobile ? "-mobile" : "") %}
{% set contentId = "sidebar-block-content-" ~ title|replace({' ': '-'})|lower ~ (isMobile ? "-mobile" : "") %}
<section class="sidebar-block sidebar-block--{{ variant }}" aria-labelledby="{{ titleId }}" role="complementary">
    <div class="sidebar-block__heading-wrapper">
        <h2 class="sidebar-block__heading" id="{{ titleId }}">
            <span class="sidebar-block__heading-text{{ variant == "archive" ? " sidebar-block__heading-text--archive" : "" }}">{{ title }}</span>
            <button class="sidebar-block__heading-button" aria-controls="{{ contentId }}">
                {{ title }}
            </button>
        </h2>
    </div>
    <div id="{{ contentId }}" class="sidebar-block__content">
        {% if links is not empty %}
            <ul class="sidebar-block__list">
                {% for link in links %}
                    <li>
                        {% if link.format %}
                            {% include '@components/file-download/file-download.html.twig' with {
                                format: link.format,
                                link: link.url,
                                filesize: link.filesize,
                                filename: link.label,
                                language: link.language,
                            } %}
                        {% else %}
                            {% include '@components/link/link.html.twig' with {
                                newTab: link.newTab,
                                url: link.url,
                                label: link.label,
                            } %}
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        {% elseif variant == 'search' %}
            <p>{{ description }}</p>
            {% include '@components/search-bar/search-bar.html.twig' with {
                id: search.id,
                action: search.action,
                input: search.input,
                button: search.button,
            } %}
        {% endif %}
    </div>
</section>
